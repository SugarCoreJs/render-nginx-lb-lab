# default.conf.template
server {
    listen 80;

    # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞
    location / {
        add_header Content-Type text/html;
        return 200 '
        <!DOCTYPE html>
        <html lang="ru">
        <head>
            <title>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞: –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏</title>
            <meta charset="UTF-8">
            <style>
                body {
                    font-family: Arial, sans-serif;
                    text-align: center;
                    padding: 50px;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    margin: 0;
                }
                .container {
                    background: rgba(255,255,255,0.1);
                    padding: 40px;
                    border-radius: 15px;
                    backdrop-filter: blur(10px);
                    display: inline-block;
                    max-width: 600px;
                }
                h1 { margin-bottom: 30px; }
                .backend-list {
                    text-align: left;
                    margin: 20px 0;
                    background: rgba(255,255,255,0.2);
                    padding: 20px;
                    border-radius: 10px;
                }
                .backend-item {
                    padding: 10px;
                    margin: 5px 0;
                    background: rgba(255,255,255,0.1);
                    border-radius: 5px;
                }
                .status { color: #4ade80; font-weight: bold; }
            </style>
        </head>
        <body>
            <div class="container">
                <h1>üöÄ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ1</h1>
                <h2>–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏ NGINX + Docker</h2>
                
                <div class="backend-list">
                    <h3>üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã:</h3>
                    <div class="backend-item">
                        <strong>–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫:</strong> NGINX –≤ Docker
                    </div>
                    <div class="backend-item">
                        <strong>–ë—ç–∫–µ–Ω–¥ 1:</strong> ${BACKEND1}
                    </div>
                    <div class="backend-item">
                        <strong>–ë—ç–∫–µ–Ω–¥ 2:</strong> ${BACKEND2}
                    </div>
                    <div class="backend-item">
                        <strong>–ê–ª–≥–æ—Ä–∏—Ç–º:</strong> Round Robin
                    </div>
                    <div class="backend-item">
                        <strong>–°—Ç–∞—Ç—É—Å:</strong> <span class="status">–ê–ö–¢–ò–í–ï–ù</span>
                    </div>
                </div>
                
                <p><strong>–í—Ä–µ–º—è —Å–µ—Ä–≤–µ—Ä–∞:</strong> $time_local</p>
                <p><em>–ó–∞–ø—Ä–æ—Å—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –º–µ–∂–¥—É –±—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å–∞–º–∏</em></p>
                
                <div style="margin-top: 30px;">
                    <a href="/health" style="color: #ffeb3b; margin: 0 10px;">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ</a>
                    <a href="/status" style="color: #ffeb3b; margin: 0 10px;">–°—Ç–∞—Ç—É—Å NGINX</a>
                </div>
            </div>
        </body>
        </html>
        ';
    }

    # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–¥–æ—Ä–æ–≤—å—è
    location /health {
        add_header Content-Type text/html;
        return 200 '
        <html>
        <head><title>Health Check</title></head>
        <body style="font-family: Arial; text-align: center; padding: 50px;">
            <h1>‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ</h1>
            <p><strong>–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏:</strong> ACTIVE</p>
            <p><strong>–ë—ç–∫–µ–Ω–¥—ã:</strong> ${BACKEND1}, ${BACKEND2}</p>
            <p><a href="/">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a></p>
        </body>
        </html>
        ';
    }

    # –°—Ç–∞—Ç—É—Å NGINX
    location /status {
        stub_status on;
        access_log off;
        add_header Content-Type text/plain;
    }

    # –ü—Ä–æ—Å—Ç–æ–π API endpoint –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏)
    location /api/info {
        add_header Content-Type text/plain;
        return 200 "Load Balancer Info:\nStatus: active\nBackends: ${BACKEND1}, ${BACKEND2}\n";
    }
}